---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allLocalGroups = await getCollection('localGroups');
const localGroups = allLocalGroups
  .filter(group => group.data.active)
  .sort((a, b) => a.data.name.localeCompare(b.data.name));
---

<BaseLayout title="Community" description="Join the MMTUK community." currentPage="community">
<header class="section_header54 text-color-white">
        <div class="padding-global">
          <div class="container-large">
            <div class="padding-section-large">
              <div class="header54_component">
                <div class="max-width-large">
                  <div class="margin-bottom margin-small">
                    <h1 class="heading-style-h1">community</h1>
                  </div>
                  <p class="text-size-medium-2">Meet, learn and organise with people building a better UK economy.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="header54_background-image-wrapper">
          <div class="image-overlay-layer"></div><img sizes="(max-width: 1920px) 100vw, 1920px" srcset="/images/Local-events-p-500.avif 500w, images/Local-events-p-800.avif 800w, images/Local-events-p-1080.avif 1080w, images/Local-events.avif 1920w" alt="" src="/images/Local-events.avif" loading="eager" class="header54_background-image">
        </div>
      </header>
      <div id="Network" class="padding-global">
        <div class="container-large">
          <div class="divider-horizontal page_divider"></div>
        </div>
      </div>
      <section class="section_portfolio11 color-scheme-2">
        <div class="padding-global">
          <div class="container-large">
            <div class="padding-section-large">
              <div class="portfolio11_component">
                <div class="margin-bottom margin-xxlarge">
                  <div class="text-align-center">
                    <div class="max-width-large align-center">
                      <div class="margin-bottom margin-small">
                        <h2 class="heading-style-h2 left">Local Groups</h2>
                      </div>
                      <p class="text-size-medium-11">Connect with MMT supporters in your area to share knowledge, discuss regional issues and coordinate local campaigns together.</p>
                    </div>
                  </div>
                </div>
                <div class="portfolio11_content">
                  <div class="portfolio11_list-wrapper">
                    <div class="w-layout-grid portfolio11_list">
                      {localGroups.map((group) => (
                        <div class="portfolio11_item">
                          <a href={`/local-group/${group.data.slug}`} class="portfolio11_item-link w-inline-block">
                            <div class="margin-bottom margin-small">
                              <div class="portfolio11_image-wrapper"><img sizes="(max-width: 640px) 100vw, 640px" src={group.data.headerImage} alt={group.data.name} loading="lazy" class="portfolio11_image"></div>
                            </div>
                            <div class="margin-bottom margin-xxsmall">
                              <h3 class="heading-style-h5-6">{group.data.title}</h3>
                            </div>
                            <div class="text-size-regular">{group.data.tagline}</div>
                            <div class="margin-top margin-small">
                              <div class="button-group">
                                <div class="button-2 is-link is-icon">
                                  <div>Get involved</div>
                                  <div class="icon-embed-xxsmall w-embed"><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M6 3L11 8L6 13" stroke="CurrentColor" stroke-width="1.5"></path>
                                    </svg></div>
                                </div>
                              </div>
                            </div>
                          </a>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <div id="Events" class="padding-global">
        <div class="container-large">
          <div class="divider-horizontal page_divider"></div>
        </div>
      </div>
      <section class="section_event7 color-scheme-4">
        <div class="padding-global">
          <div class="container-large">
            <div class="padding-section-large">
              <div class="event7_component">
                <div class="margin-bottom margin-xxlarge">
                  <div class="text-align-center">
                    <div class="max-width-large align-center">
                      <div class="margin-bottom margin-small">
                        <h2 class="heading-style-h2 left">Upcoming events</h2>
                      </div>
                      <p class="text-size-medium-12">Discover critical conversations shaping economic understanding</p>
                    </div>
                  </div>
                </div>
                <div class="event7_content">
                  <div class="event7_list-wrapper">
                    <div class="w-layout-grid event7_list" style="justify-content: center;">
                      <div class="event7_item">
                        <a href="/news/bill-mitchell-event-feb2026" class="event7_item-link w-inline-block">
                          <div class="margin-bottom margin-small">
                            <div class="event7_image-wrapper">
                              <div class="event7_date-wrapper">
                                <div class="text-size-small-5">Wed</div>
                                <div class="heading-style-h4">25</div>
                                <div class="text-size-small-5">Feb 2026</div>
                              </div><img loading="lazy" src="/images/events-lecture.avif" alt="Bill Mitchell speaking event" class="event7_image">
                            </div>
                          </div>
                          <div class="margin-bottom margin-xsmall">
                            <div class="event7_meta-wrapper">
                              <div class="tag">
                                <div>Lecture</div>
                              </div>
                            </div>
                          </div>
                          <h3 class="heading-style-h5-6">Professor Bill Mitchell Speaking Event</h3>
                          <div class="margin-bottom margin-xxsmall">
                            <div>Hybrid (in-person and online)</div>
                          </div>
                          <div class="text-size-regular">Join us for an exclusive talk by Professor Bill Mitchell, one of the founding architects of Modern Monetary Theory, discussing the UK economy and the case for a Job Guarantee.</div>
                          <div class="margin-top margin-small">
                            <div class="button-group">
                              <div class="button-2 is-link is-icon">
                                <div>Learn more</div>
                                <div class="icon-embed-xxsmall w-embed"><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 3L11 8L6 13" stroke="CurrentColor" stroke-width="1.5"></path>
                                  </svg></div>
                              </div>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <div id="discord" class="padding-global">
        <div class="container-large">
          <div class="divider-horizontal page_divider"></div>
        </div>
      </div>
      <section class="section_cta1">
        <div class="padding-global">
          <div class="container-large">
            <div class="padding-section-large">
              <div class="cta1_component">
                <div class="w-layout-grid cta1_content">
                  <div class="cta1_content-left">
                    <div class="margin-bottom margin-small">
                      <h2 class="heading-style-h2 left">MMTUK Discord Server</h2>
                    </div>
                    <p class="text-size-medium-13">Join our moderated UK community on Discord for lively discussion, learning, events, and practical collaboration.<br><br>Connect with MMT advocates across the UK and find your local group.</p>
                    <div class="margin-top margin-medium">
                      <div class="button-group" style="margin-bottom: 1.5rem;">
                        <a href="https://discord.gg/S3UbxFe4FR" target="_blank" class="button-2 w-button">Join Discord here</a>
                      </div>
                    </div>
                    <div class="accordion1_component">
                      <div data-w-id="discord-accordion-community" class="accordion1_top">
                        <div class="text-size-medium-19 text-weight-bold">If you have a Discord account already</div>
                        <div class="accordion1_icon w-embed"><svg width="100%" height="100%" viewbox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.5303 20.8839C16.2374 21.1768 15.7626 21.1768 15.4697 20.8839L7.82318 13.2374C7.53029 12.9445 7.53029 12.4697 7.82318 12.1768L8.17674 11.8232C8.46963 11.5303 8.9445 11.5303 9.2374 11.8232L16 18.5858L22.7626 11.8232C23.0555 11.5303 23.5303 11.5303 23.8232 11.8232L24.1768 12.1768C24.4697 12.4697 24.4697 12.9445 24.1768 13.2374L16.5303 20.8839Z" fill="currentColor"></path>
                          </svg></div>
                      </div>
                      <div style="height:0px" class="accordion1_bottom">
                        <div class="margin-bottom margin-small">
                          <p>Click the Discord link above to join the MMTUK server. Once you're in, explore channels for local groups, events, and discussions.</p>
                        </div>
                        <div class="button-group">
                          <a href="https://discord.gg/S3UbxFe4FR" target="_blank" class="button-2 w-button">Join now</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="cta1_image-wrapper" style="align-self: start;"><img loading="lazy" src="/images/MMTUK-Discord-2.avif" alt="" class="cta1_image"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
</BaseLayout>

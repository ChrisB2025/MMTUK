---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const profiles = await getCollection('ecosystem');
  return profiles.map((profile) => ({
    params: { slug: profile.data.slug },
    props: { profile },
  }));
}

const { profile } = Astro.props;
const { Content } = await render(profile);
---

<BaseLayout title={profile.data.name} description={profile.data.summary} currentPage="ecosystem">
  <header class="section_header54 text-color-white">
    <div class="padding-global">
      <div class="container-large">
        <div class="padding-section-large">
          <div class="header54_component">
            <div class="max-width-large">
              <div class="margin-bottom margin-small">
                <div class="breadcrumb_component">
                  <a href="/ecosystem" class="breadcrumb-link w-inline-block">
                    <div>Ecosystem</div>
                  </a>
                  <div class="breadcrumb-divider w-embed">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M6 3L11 8L6 13" stroke="CurrentColor" stroke-width="1.5"></path>
                    </svg>
                  </div>
                  <span class="text-color-white">{profile.data.name}</span>
                </div>
              </div>
              <h1 class="heading-style-h1">{profile.data.name}</h1>
              <div class="margin-top margin-small">
                <div class="text-size-medium-2">
                  {profile.data.types && profile.data.types.length > 0 && (
                    <span class="text-weight-semibold">{profile.data.types.join(' • ')}</span>
                  )}
                  {profile.data.country && (
                    <span> — {profile.data.country}</span>
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="header54_background-image-wrapper">
      <div class="image-overlay-layer"></div>
      <img src={profile.data.logo || '/images/MMT-UK-Logo-512x512.avif'} alt={profile.data.name} loading="eager" class="header54_background-image" style="object-fit: contain; padding: 4rem;">
    </div>
  </header>

  <section class="section_content28">
    <div class="padding-global">
      <div class="container-large">
        <div class="padding-section-large">
          <div class="content28_component">
            <div class="w-layout-grid content28_layout">
              <div class="content28_sidebar">
                {profile.data.logo && (
                  <div class="margin-bottom margin-medium">
                    <img src={profile.data.logo} alt={profile.data.name} class="ecosystem_logo" style="max-width: 200px; border-radius: 8px;">
                  </div>
                )}

                <div class="margin-bottom margin-medium">
                  <div class="text-weight-semibold margin-bottom margin-xsmall">Status</div>
                  <div class={`badge ${profile.data.status === 'Active' ? 'is-success' : 'is-neutral'}`}>
                    {profile.data.status}
                  </div>
                </div>

                {(profile.data.website || profile.data.twitter || profile.data.facebook || profile.data.youtube || profile.data.discord) && (
                  <div class="margin-bottom margin-medium">
                    <div class="text-weight-semibold margin-bottom margin-xsmall">Links</div>
                    <div class="ecosystem_links">
                      {profile.data.website && (
                        <a href={profile.data.website} target="_blank" rel="noopener noreferrer" class="button is-link is-icon w-inline-block">
                          <div class="icon-embed-xsmall w-embed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 -960 960 960">
                              <path fill="currentColor" d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm-40-82v-78q-33 0-56.5-23.5T360-320v-40L168-552q-3 18-5.5 36t-2.5 36q0 121 79.5 212T440-162Zm276-102q20-22 36-47.5t26.5-53q10.5-27.5 16-56.5t5.5-59q0-98-54.5-179T600-776v16q0 33-23.5 56.5T520-680h-80v80q0 17-11.5 28.5T400-560h-80v80h240q17 0 28.5 11.5T600-440v120h40q26 0 47 15.5t29 40.5Z"/>
                            </svg>
                          </div>
                          <div>Website</div>
                        </a>
                      )}
                      {profile.data.twitter && (
                        <a href={profile.data.twitter} target="_blank" rel="noopener noreferrer" class="button is-link is-icon w-inline-block">
                          <div class="icon-embed-xsmall w-embed">
                            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M17.1761 4H19.9362L13.9061 10.7774L21 20H15.4456L11.0951 14.4066L6.11723 20H3.35544L9.80517 12.7508L3 4H8.69545L12.6279 9.11262L17.1761 4ZM16.2073 18.3754H17.7368L7.86441 5.53928H6.2232L16.2073 18.3754Z" fill="currentColor"></path>
                            </svg>
                          </div>
                          <div>X/Twitter</div>
                        </a>
                      )}
                      {profile.data.facebook && (
                        <a href={profile.data.facebook} target="_blank" rel="noopener noreferrer" class="button is-link is-icon w-inline-block">
                          <div class="icon-embed-xsmall w-embed">
                            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M22 12.0611C22 6.50451 17.5229 2 12 2C6.47715 2 2 6.50451 2 12.0611C2 17.0828 5.65684 21.2452 10.4375 22V14.9694H7.89844V12.0611H10.4375V9.84452C10.4375 7.32296 11.9305 5.93012 14.2146 5.93012C15.3088 5.93012 16.4531 6.12663 16.4531 6.12663V8.60261H15.1922C13.95 8.60261 13.5625 9.37822 13.5625 10.1739V12.0611H16.3359L15.8926 14.9694H13.5625V22C18.3432 21.2452 22 17.083 22 12.0611Z" fill="currentColor"></path>
                            </svg>
                          </div>
                          <div>Facebook</div>
                        </a>
                      )}
                      {profile.data.youtube && (
                        <a href={profile.data.youtube} target="_blank" rel="noopener noreferrer" class="button is-link is-icon w-inline-block">
                          <div class="icon-embed-xsmall w-embed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24">
                              <path fill="currentColor" d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                          </div>
                          <div>YouTube</div>
                        </a>
                      )}
                      {profile.data.discord && (
                        <a href={profile.data.discord} target="_blank" rel="noopener noreferrer" class="button is-link is-icon w-inline-block">
                          <div class="icon-embed-xsmall w-embed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24">
                              <path fill="currentColor" d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                            </svg>
                          </div>
                          <div>Discord</div>
                        </a>
                      )}
                    </div>
                  </div>
                )}
              </div>

              <div class="max-width-large">
                {profile.data.summary && (
                  <div class="margin-bottom margin-large">
                    <p class="text-size-medium">{profile.data.summary}</p>
                  </div>
                )}
                <div class="text-rich-text w-richtext">
                  <Content />
                </div>
                <div class="margin-top margin-large">
                  <a href="/ecosystem" class="button is-secondary w-button">Back to Ecosystem</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer4_component">
    <div class="padding-global">
      <div class="container-large">
        <div class="padding-vertical padding-xxlarge">
          <div class="divider-horizontal footer_divider"></div>
          <div class="padding-top padding-medium">
            <div class="footer8_bottom-wrapper">
              <div class="footer8_credit-text">© 2025 MMTUK Policy Group Ltd</div>
              <div class="w-layout-grid footer8_legal-list">
                <a href="/privacy-policy" class="footer8_legal-link">Privacy policy</a>
                <a href="/terms-of-engagement" class="footer8_legal-link">Terms of engagement</a>
                <a href="/cookie-preferences" class="footer8_legal-link">Cookie preferences</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
</BaseLayout>

<style>
  .ecosystem_links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  .badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.875rem;
    font-weight: 500;
  }
  .badge.is-success {
    background-color: #10b981;
    color: white;
  }
  .badge.is-neutral {
    background-color: #6b7280;
    color: white;
  }
  .content28_layout {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 3rem;
  }
  @media (max-width: 768px) {
    .content28_layout {
      grid-template-columns: 1fr;
    }
  }
</style>
